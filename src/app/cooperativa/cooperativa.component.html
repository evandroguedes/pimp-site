<header class="sign-form-header-image" *ngIf="!showMap"></header>

<div class="container container-extra-padding" [hidden]="!loading">
    <div class="loading-box">
        <div class="loading">Loading&#8230;</div>
        <p class="loading-message">{{ loadingMessage }}</p>
    </div>
</div>

<div class="container container-extra-padding">

    <div class="row" *ngIf="!showMap">
        <div class="col-md-6 col-lg-6">
            <label> Com este formulário você irá cadastrar uma nova cooperativa no nosso aplicativo. Preencha tudo com muito carinho e atenção, este perfil será o cartão de visita da cooperativa :)</label>
        </div>  

        <div class="col-md-6 col-lg-6" align="">
            <a class="btn newbtn2 my-btn2" data-toggle="modal" data-target="#myModal" data-backdrop="true">
                +DICAS PARA CADASTRO
            </a>
        </div>
    </div>

    <hr *ngIf="!showMap">
    <form (ngSubmit)="save()" #catadorForm="ngForm" enctype="multipart/form-data">
        <!-- FIRST STEP -->
        <div *ngIf="!showMap">
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <input type="text" class="form-control" id="name" name="name" placeholder="Nome da cooperativa" [(ngModel)]="cooperativa.name"
                            maxlength="60" required>
                    </div>

                    <div class="form-group">
                        <input type="text" id="datepicker" class="form-control" name="founded_in" placeholder="Data de fundação" [textMask]="{mask: masks.date}" [(ngModel)]="cooperativa.founded_in">
                    </div>

                    <div class="form-group">
                        <input type="text" class="form-control" id="email" name="email" placeholder="E-mail" [(ngModel)]="cooperativa.email" maxlength="100"
                            required>
                    </div>

                    <div class="form-group">
                        <div class="form-group">
                            <input type="number" class="form-control" id="how_many_cooperators" name="how_many_cooperators" placeholder="Número de cooperados"
                                [(ngModel)]="cooperativa.how_many_cooperators" required>
                        </div>
                    </div>
    
                    <div class="form-group">
                        <textarea class="form-control" id="history" rows="5" name="history" maxlength="600" placeholder="História da cooperativa" required [(ngModel)]="cooperativa.history"></textarea>
                    </div>

                    <div class="form-group">
                        <input type="text" class="form-control" id="phrase" name="phrase" placeholder="Frase marcante" required maxlength="200" [(ngModel)]="cooperativa.phrase">
                    </div>

                    <div class="form-group">
                        <input type="text" class="form-control" id="phones0" name="phones0" [textMask]="{mask: masks.number}" placeholder="Telefone Principal" [(ngModel)]="cooperativa.phones[0].phone"
                            required>
                    </div>

                    <div class="form-group">
                        <label class="label-left-margin">Este n&uacute;mero tem Whatsapp?</label><br />
                        <label class="radio-inline label-left-margin" style="color: #a0a0a0;">
                            <input type="radio" 
                                required 
                                name="whatsapp0-s"
                                [value]="1"
                                [(ngModel)]="cooperativa.phones[0].whatsapp">
                                Sim
                        </label>
                        <label class="radio-inline" style="margin-left:17%; color: #a0a0a0;">
                            <input type="radio" 
                                required 
                                name="whatsapp0-n"
                                [value]="0"
                                [(ngModel)]="cooperativa.phones[0].whatsapp"
                                ng-model="userfullName6">N&atilde;o
                            </label>
                    </div>

                    <div class="form-group">
                        <input type="text" class="form-control" id="phones1" placeholder="Telefone para garantir" [textMask]="{mask: masks.number}" name="phones1" [(ngModel)]="cooperativa.phones[1].phone">
                    </div>

                    <div class="form-group">
                        <label class="label-left-margin">Este n&uacute;mero tem Whatsapp?</label><br />
                        <label class="radio-inline label-left-margin" style="color: #a0a0a0;">
                            <input type="radio" 
                                required 
                                name="whatsapp1-s"
                                [value]="1"
                                [(ngModel)]="cooperativa.phones[1].whatsapp">
                                Sim
                        </label>
                        <label class="radio-inline" style="margin-left:17%; color: #a0a0a0;">
                            <input type="radio" 
                                required 
                                name="whatsapp1-n"
                                [value]="0"
                                [(ngModel)]="cooperativa.phones[1].whatsapp"
                                ng-model="userfullName6">N&atilde;o
                            </label>
                    </div>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="col-lg-12">
                    <img src="" id="preview" />
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="" style="margin-bottom: 4px;">
                        <label>Adicionar foto principal</label>
                        <label class="button-upload">
                            <span class="glyphicon glyphicon-camera" aria-hidden="true"></span>
                            <strong>Selecionar foto</strong>
                        <input type='file' 
                                id="img-file" 
                                data-buttonBefore="true"
                                data-placeholder="…"
                                data-buttonText="Adicionar foto"
                                data-iconName="glyphicon glyphicon-camera"
                                required 
                                class="filestyle"
                                placeholder="Adicionar foto"
                                (change)="readLogoURL($event);"
                                hidden />
                        </label>
                    </div>

                    <div class="" style="margin-bottom: 4px;">
                        <label>Adicionar fotos da galeria</label>
                        <label class="button-upload">
                            <span class="glyphicon glyphicon-camera" aria-hidden="true"></span>
                            <strong>Selecionar foto</strong>
                        <input type='file' 
                                id="img-file" 
                                data-buttonBefore="true"
                                data-placeholder="…"
                                data-buttonText="Adicionar foto"
                                data-iconName="glyphicon glyphicon-camera"
                                required 
                                class="filestyle"
                                placeholder="Adicionar foto"
                                (change)="readGalleryURL($event);"
                                multiple
                                hidden />
                        </label>
                    </div>

                </div>
            </div>          
            <div class="row">
                <div class="col-sm-4 col-md-2" *ngFor="let photo of cooperativa.photos" [hidden]="photo.delete && photo.delete == 1">
                    <div class="thumbnail">
                        <img [src]="getGallerySrc(photo)" class="img-responsive">
                        <div class="caption">
                            <p>
                                <a (click)="removeImageOnGallery(photo)" class="btn btn-danger" role="button">Delete</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>                
            
            <hr />
            <!-- PARCEIROS -->
            <div class="row">
                <div class="col-md-12">
                    <h2>Galeria de parceiros</h2>
                    <div class="" style="margin-bottom: 4px;">
                        <label>Logo</label>
                        <label class="button-upload">
                            <span class="glyphicon glyphicon-camera" aria-hidden="true"></span>
                            <strong>Selecionar imagem</strong>
                        <input type='file' 
                        id="parceiro-image-input"
                                data-buttonBefore="true"
                                data-placeholder="…"
                                data-buttonText="Adicionar foto"
                                data-iconName="glyphicon glyphicon-camera"
                                required 
                                class="filestyle"
                                (change)="readPartnerURL($event);"
                                hidden />
                        </label>
                    </div>

                    <div class="form-group">
                        <input type="text" class="form-control" id="parceiro-name" placeholder="Nome do parceiro" name="parceiro-name" [(ngModel)]="parceiro.name"
                            maxlength="60">
                    </div>
                    <p>
                        <a (click)="addPartner(parceiro)" class="add-button btn-info btn" role="button">+ PARCEIRO</a>
                    </p>
                </div>
            </div>  
            <div class="row">                
                <div class="col-sm-4 col-md-2" *ngFor="let partner of cooperativa.partners" [hidden]="partner.delete && partner.delete == 1">
                    <div class="thumbnail">
                        <img [src]="getPartnerSrc(partner)" class="img-responsive">
                        <div class="caption">
                            <h3>Parceiro #</h3>
                            <h4>{{ partner.name }}</h4>                              
                            <p>
                                <a (click)="removePartner(partner)" class="btn btn-danger" role="button">Delete</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /PARCEIROS -->
            <hr />
            <!-- MATERIAIS -->
            <div class="row">
                <!-- ----------Col for the form------------------- -->
                <div class="col-md-6">
                    <!-- --------1st row of the colm--------- -->
                    <div class="row row-bottom-margin">
                        <div class="col-md-4  col-sm-4  col-xs-4">
                            <p>
                                <img src="assets/img/cadastro/icon 1.png" 
                                        class="img-responsive img-material"
                                        (click)="selectMaterial('misturado')"
                                        [ngClass]="{'img-selected': materialSelected.indexOf('misturado') > -1 }" >
                            </p>
                            <label class="radio-inline" style="padding-left:20%; color: #a0a0a0;">
                                <input type="radio" 
                                        class="inline" 
                                        value="'misturado'" 
                                        [checked]="materialSelected.indexOf('misturado') > -1" 
                                        (click)="selectMaterial('misturado')" >
                                    Misturado
                            </label>
                        </div>

                        <!-- ----------2nd colm------------- -->
                        <div class="col-md-4  col-sm-4 col-xs-4">
                            <p>
                                <img src="assets/img/cadastro/icon2.png" 
                                        class="img-responsive img-material"
                                        (click)="selectMaterial('lata')"
                                        [ngClass]="{'img-selected': materialSelected.indexOf('lata') > -1 }">
                            </p>
                            <label class="radio-inline" style="padding-left:20%; color: #a0a0a0;">
                                <input type="radio" 
                                        class="inline" 
                                        value="'lata'" 
                                        [checked]="materialSelected.indexOf('lata') > -1" 
                                        (click)="selectMaterial('lata')">Lata</label>
                        </div>

                        <!-- -----------3rd colm-------------------- -->
                        <div class="col-md-4  col-sm-4 col-xs-4">
                            <p>
                                <img src="assets/img/cadastro/icon3.png" 
                                        class="img-responsive img-material"
                                        (click)="selectMaterial('vidro')"
                                        [ngClass]="{'img-selected': materialSelected.indexOf('vidro') > -1 }">
                            </p>
                            <label class="radio-inline" style="padding-left:28%; color: #a0a0a0;">
                                <input type="radio" 
                                        class="inline" 
                                        value="'vidro'" 
                                        [checked]="materialSelected.indexOf('vidro') > -1" 
                                        (click)="selectMaterial('vidro')" >
                                    Vidro
                            </label>
                        </div>
                    </div>



                    <!-- --------2nd row of the colm--------- -->
                    <div class="row row-bottom-margin">
                        <div class="col-md-4  col-sm-4  col-xs-4">
                            <p>
                                <img src="assets/img/cadastro/icon4.png" 
                                        class="img-responsive img-material" 
                                        (click)="selectMaterial('papel')"
                                        [ngClass]="{'img-selected': materialSelected.indexOf('papel') > -1 }" >
                            </p>
                            <label class="radio-inline" style="padding-left:20%; color: #a0a0a0;">
                                <input type="radio" 
                                        class="inline" 
                                        value="'papel'" 
                                        [checked]="materialSelected.indexOf('papel') > -1" 
                                        (click)="selectMaterial('papel')">Papel</label>
                        </div>

                        <!-- ----------2nd colm------------- -->
                        <div class="col-md-4  col-sm-4 col-xs-4">
                            <p>
                                <img src="assets/img/cadastro/icon5.png" 
                                        class="img-responsive img-material" 
                                        (click)="selectMaterial('plastico')"
                                        [ngClass]="{'img-selected': materialSelected.indexOf('plastico') > -1 }">
                            </p>
                            <label class="radio-inline" style="padding-left:20%; color: #a0a0a0;">
                                <input type="radio" 
                                        class="inline" 
                                        value="'plastico'" 
                                        [checked]="materialSelected.indexOf('plastico') > -1" 
                                        (click)="selectMaterial('plastico')">
                                    Plástico
                            </label>
                        </div>

                        <!-- -----------3rd colm-------------------- -->
                        <div class="col-md-4  col-sm-4 col-xs-4">
                            <p>
                                <img src="assets/img/cadastro/icon6.png" 
                                        class="img-responsive img-material" 
                                        (click)="selectMaterial('metal')"
                                        [ngClass]="{'img-selected': materialSelected.indexOf('metal') > -1 }">
                            </p>
                            <label class="radio-inline" style="padding-left:28%; color: #a0a0a0;">
                                <input type="radio" 
                                        class="inline" 
                                        value="'metal'" 
                                        [checked]="materialSelected.indexOf('metal') > -1" 
                                        (click)="selectMaterial('metal')">
                                    Metal
                            </label>
                        </div>
                    </div>

                    <!-- -----------End of 1stcol------- -->
                </div>

                <div class="col-md-6">
                    <!-- --------1st row of the colm--------- -->
                    <!-- --------1st row of the colm--------- -->
                    <div class="row row-bottom-margin">
                        <div class="col-md-4  col-sm-4  col-xs-4">
                            <p>
                                <img src="assets/img/cadastro/icon7.png" 
                                        class="img-responsive img-material" 
                                        (click)="selectMaterial('oleo')"
                                        [ngClass]="{'img-selected': materialSelected.indexOf('oleo') > -1 }">
                            </p>
                            <label class="radio-inline" style="padding-left:20%; color: #a0a0a0;">
                                <input type="radio" 
                                        class="inline" 
                                        value="'oleo'" 
                                        [checked]="materialSelected.indexOf('oleo') > -1" 
                                        (click)="selectMaterial('oleo')">
                                    Óleo
                            </label>
                        </div>

                        <!-- ----------2nd colm------------- -->
                        <div class="col-md-4  col-sm-4 col-xs-4">
                            <p>
                                <img src="assets/img/cadastro/icon8.png" 
                                        class="img-responsive img-material" 
                                        (click)="selectMaterial('eletronico')"
                                        [ngClass]="{'img-selected': materialSelected.indexOf('eletronico') > -1 }">
                            </p>
                            <label class="radio-inline" style="padding-left:10%; color: #a0a0a0;">
                                <input type="radio" 
                                        class="inline" 
                                        value="'eletronico'" 
                                        [checked]="materialSelected.indexOf('eletronico') > -1" 
                                        (click)="selectMaterial('eletronico')">
                                    Eletrônico
                            </label>
                        </div>

                        <!-- -----------3rd colm-------------------- -->
                        <div class="col-md-4  col-sm-4 col-xs-4">
                            <p>
                                <img src="assets/img/cadastro/icon9.png" 
                                        class="img-responsive img-material" 
                                        (click)="selectMaterial('bateria')"
                                        [ngClass]="{'img-selected': materialSelected.indexOf('bateria') > -1 }">
                            </p>
                            <label class="radio-inline" style="padding-left:28%; color: #a0a0a0;">
                                <input type="radio" 
                                        class="inline" 
                                        value="'bateria'" 
                                        [checked]="materialSelected.indexOf('bateria') > -1" 
                                        (click)="selectMaterial('bateria')">Baterias</label>
                        </div>
                    </div>



                    <!-- --------2nd row of the colm--------- -->
                    <div class="row row-bottom-margin">
                        <div class="col-md-4  col-sm-4  col-xs-4">
                            <p>
                                <img src="assets/img/cadastro/icon10.png" 
                                        class="img-responsive img-material" 
                                        (click)="selectMaterial('moveis')"
                                        [ngClass]="{'img-selected': materialSelected.indexOf('moveis') > -1 }">
                            </p>
                            <label class="radio-inline" style="padding-left:20%; color: #a0a0a0;">
                                <input type="radio" 
                                        class="inline" 
                                        value="'moveis'" 
                                        [checked]="materialSelected.indexOf('moveis') > -1" 
                                        (click)="selectMaterial('moveis')">Móveis</label>
                        </div>

                        <!-- ----------2nd colm------------- -->
                        <div class="col-md-4  col-sm-4 col-xs-4">
                            <p>
                                <img src="assets/img/cadastro/icon11.png" 
                                        class="img-responsive img-material" 
                                        (click)="selectMaterial('entulho')"
                                        [ngClass]="{'img-selected': materialSelected.indexOf('entulho') > -1 }">
                            </p>
                            <label class="radio-inline" style="padding-left:20%; color: #a0a0a0;">
                                <input type="radio" 
                                        class="inline" 
                                        value="'entulho'" 
                                        [checked]="materialSelected.indexOf('entulho') > -1" 
                                        (click)="selectMaterial('entulho')">Entulho</label>
                        </div>

                        <!-- -----------3rd colm-------------------- -->
                        <div class="col-md-4  col-sm-4 col-xs-4">
                            <p>
                                <img src="assets/img/cadastro/icon12.png" 
                                        class="img-responsive img-material" 
                                        (click)="selectMaterial('outros')"
                                        [ngClass]="{'img-selected': materialSelected.indexOf('outros') > -1 }">
                            </p>
                            <label class="radio-inline" style="padding-left:28%; color: #a0a0a0;">
                                <input type="radio" 
                                        class="inline" 
                                        value="'outros'" 
                                        [checked]="materialSelected.indexOf('outros') > -1" 
                                        (click)="selectMaterial('outros')">Outros</label>
                        </div>
                    </div>
                </div>
                <!-- --------------End of row-------------- -->
            </div>
            
            <!--/ MATERIAIS -->
        </div>
        <!-- /FIRST STEP -->

        <!-- SECOND STEP (MAP) -->
        <div *ngIf="showMap">
            <div class="row">
                <div class="col-lg-12 map-title-container">
                    <h4>LOCAL DE TRABALHO</h4>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12 map-container">
                    <agm-map
                        [latitude]="markLat"
                        [longitude]="markLng"
                        [zoom]="zoom"
                        [streetViewControl]="false"
                        [scrollwheel]="false"
                        (mapClick)="onClickMap($event)"
                        style="height: 315px">
                        <agm-marker
                            [latitude]="markLat"
                            [longitude]="markLng"
                            [markerDraggable]="true"
                            [iconUrl]=""
                            (dragEnd)="onMoveMark($event)"></agm-marker>
                    </agm-map>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div>
                        <div style="width: 28%; float: left; margin-right: 2%;">
                                <div class="form-group">
                                    <input type="text" 
                                            class="form-control" 
                                            name="state"
                                            placeholder="Estado" 
                                            [(ngModel)]="coperativa.state"
                                            (focusout)="addressFocusOut()"
                                            maxlength="128">
                                </div> 
                            </div>    
                        <div style="width: 28%; float: left; margin-right: 2%;">
                                <div class="form-group">
                                    <input type="text" 
                                            class="form-control" 
                                            placeholder="Cidade" 
                                            id="city" 
                                            name="city"
                                            [(ngModel)]="coperativa.city"
                                            required
                                            (focusout)="addressFocusOut()"
                                            maxlength="64">
                                </div>
                            </div>
                        <div style="width: 40%; float: left">
                            <div class="form-group">
                                <input type="text" 
                                        class="form-control" 
                                        placeholder="Bairro" 
                                        id="address_region" 
                                        name="address_region"
                                        [(ngModel)]="coperativa.address_region"
                                        (focusout)="addressFocusOut()"
                                        maxlength="128">
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="input-col-left">
                            <div class="form-group">
                                <input type="text" 
                                        class="form-control" 
                                        placeholder="Rua" 
                                        required
                                        id="address_base" 
                                        name="address_base"
                                        [(ngModel)]="coperativa.address_base"
                                        (focusout)="addressFocusOut()"
                                        maxlength="500">
                            </div>
                        </div>
                        <div class="input-col-right">
                            <div class="form-group">
                                <input type="number" 
                                        class="form-control remove-stepper" 
                                        placeholder="nº"
                                        id="number" 
                                        name="number"
                                        [(ngModel)]="coperativa.number">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /SECOND STEP (MAP) -->

        <!-- BUTTONS -->
        <div class="row buttons-wrapper" *ngIf="!showMap">
            <div class="col-xs-6">
                <button type="button" (click)="goHome()" class="btn cancel-button btn-danger">
                    CANCELAR
                </button>
            </div>
            <div class="col-xs-6">
                <a (click)="toggleMap()" class="btn btn-success primary-button">
                    AVANÇAR
                </a>
            </div>
        </div>

        <div class="row" *ngIf="showMap">
                <div class="col-xs-6">
                    <button type="button" (click)="toggleMap()" class="btn cancel-button btn-danger">
                        CANCELAR
                    </button>
                </div>
                <div class="col-xs-6">
                    <a (click)="toggleMap()" class="btn primary-button btn-success">
                        CONFIRMAR
                    </a>
                </div>
            </div>

        <!-- /BUTTONS -->
    </form>

</div>

<!-- Modal1 -->
<div class="mod1">
    <div class="modal fade" id="myModal" role="dialog" tabindex="-1" aria-labelledby="Dicas para cadastro">
        <div class="modal-dialog modal-lg" role="content">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title main-head">DICAS PARA CADASTRO</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">&times;</button>
                </div>
                <ul>
                    <li >
                        Comece mostrando nosso vídeo para o catador/a, é a forma mais simples de explicar;
                    </li>
                    <li>
                        Você estará criando um perfil profissional, tenha isso em mente;
                    </li>
                    <li class="">
                        Queremos respeitar e divulgar a imagem dos catadores, por isso, capriche na foto. Ela precisa ser clara e positiva, é o cartão de visita do catador;
                    </li>
                    <li class="">
                        Para "História de vida", algumas perguntas boas para disparar são: como começou o trabalho, quais são seus sonhos, quem é a sua família...;
                    </li>
                    <li class="">
                        Para "Frase marcante", você pode buscar uma frase que o catador goste, ou algo que está escrito na carroça, uma letra de música, algo marcante e bonito;
                    </li>
                    <li class="">
                        Deixe claro que esse é um convite profissional, que o catador será chamado para realizar trabalhos e que a equipe do Cataki estará acompanhando o processo.
                    </li>
                    <li class="">
                        Estamos caminhando para a cooperativa digital! Ao longo de 2018 isso irá acontecer e os cadastrados poderão participar.
                    </li>
                </ul>
            </div>
        </div>
    </div>
    </div>